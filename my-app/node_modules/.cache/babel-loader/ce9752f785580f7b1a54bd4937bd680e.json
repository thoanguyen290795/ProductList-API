{"ast":null,"code":"var _jsxFileName = \"/Users/thoanguyen/Desktop/React Zendvn/reactjs-redux-api-nghiepuit/my-app/src/pages/FormPage.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport ProductList from '../components/ProductList';\nimport { actAddProductRequest, acUpdateProductRequest, actGetProductRequest, actFetchProductsRequest } from './../actions/index';\nimport itemSelected from './../reducers/itemSelected';\n\nclass FormPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: '',\n      name: '',\n      price: '',\n      status: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  UNSAFE_componentWillMount() {\n    let {\n      match\n    } = this.props;\n\n    if (match) {\n      // update\n      let id = match.params.id;\n      this.props.onEditProduct(id);\n    } // else => add\n\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    let itemSelected = nextProps.itemSelected;\n\n    if (nextProps !== null) {\n      this.setState({\n        id: itemSelected.id,\n        name: itemSelected.name,\n        price: itemSelected.price,\n        status: itemSelected.status\n      });\n    }\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.name === 'status' ? target.checked : target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let id = this.state.id;\n    let product = {\n      id: this.state.id,\n      name: this.state.name,\n      price: this.state.price,\n      status: this.state.status\n    };\n\n    if (id) {\n      this.props.onUpdateProduct(product);\n    } else {\n      this.props.handleSubmit(product);\n    }\n\n    this.props.fetchAllPropducts();\n    this.props.history.goBack();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"T\\xEAn S\\u1EA3n Ph\\u1EA9m\"), React.createElement(\"input\", {\n      name: \"name\",\n      value: this.state.name,\n      onChange: this.handleChange,\n      type: \"text\",\n      className: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Gi\\xE1\"), React.createElement(\"input\", {\n      type: \"number\",\n      value: this.state.price,\n      onChange: this.handleChange,\n      name: \"price\",\n      className: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-check\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-check-label mr-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \" Tr\\u1EA1ng Th\\xE1i\"), React.createElement(\"input\", {\n      type: \"checkbox\",\n      checked: this.state.status,\n      value: this.state.status,\n      onChange: this.handleChange,\n      name: \"status\",\n      className: \"form-check-input mr-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), \"C\\xF2n H\\xE0ng\"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Submit\"), React.createElement(Link, {\n      to: \"/product-list\",\n      className: \"btn btn-danger mr-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-arrow-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), \" Tr\\u1EDF L\\u1EA1i\")));\n  }\n\n}\n\nconst mapStatetoProps = state => {\n  return {\n    itemSelected: state.itemSelected\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    handleSubmit: product => {\n      dispatch(actAddProductRequest(product));\n    },\n    onEditProduct: id => {\n      dispatch(actGetProductRequest(id));\n    },\n    onUpdateProduct: product => {\n      dispatch(acUpdateProductRequest(product));\n    },\n    fetchAllPropducts: () => {\n      dispatch(actFetchProductsRequest());\n    }\n  };\n};\n\nexport default connect(mapStatetoProps, mapDispatchToProps)(FormPage);","map":{"version":3,"sources":["/Users/thoanguyen/Desktop/React Zendvn/reactjs-redux-api-nghiepuit/my-app/src/pages/FormPage.js"],"names":["React","Component","connect","Link","ProductList","actAddProductRequest","acUpdateProductRequest","actGetProductRequest","actFetchProductsRequest","itemSelected","FormPage","constructor","props","state","id","name","price","status","handleChange","bind","handleSubmit","UNSAFE_componentWillMount","match","params","onEditProduct","UNSAFE_componentWillReceiveProps","nextProps","setState","event","target","value","checked","preventDefault","product","onUpdateProduct","fetchAllPropducts","history","goBack","render","mapStatetoProps","mapDispatchToProps","dispatch","ownProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport ProductList from '../components/ProductList';\nimport {actAddProductRequest,acUpdateProductRequest,actGetProductRequest,actFetchProductsRequest} from './../actions/index';\nimport itemSelected from './../reducers/itemSelected'\nclass FormPage extends Component {\n  constructor(props){\n    super(props);\n    this.state={\n      id:'',\n      name:'',\n      price: '',\n      status: false\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  UNSAFE_componentWillMount(){\n    let {match} = this.props; \n    if(match){ // update\n      let id = match.params.id;\n      this.props.onEditProduct(id);\n       \n    }// else => add\n  }\n  UNSAFE_componentWillReceiveProps(nextProps){\n  let itemSelected = nextProps.itemSelected;\n    if(nextProps!==null){\n         this.setState({\n            id: itemSelected.id,\n            name: itemSelected.name,\n            price: itemSelected.price,\n            status: itemSelected.status\n         })\n    }  \n  }\n  handleChange(event) {\n    const target = event.target;\n    const value = target.name === 'status' ? target.checked : target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\nhandleSubmit(event) {\nevent.preventDefault();\nlet id = this.state.id;\nlet product ={\n  id: this.state.id,\n  name:this.state.name,\n  price:this.state.price,\n  status: this.state.status\n}\nif(id){\n  this.props.onUpdateProduct(product);\n} else {\nthis.props.handleSubmit(product);\n  }\nthis.props.fetchAllPropducts()\nthis.props.history.goBack();\n  }\n\nrender(){\n return (\n  <div className=\"container\">\n  <form onSubmit={this.handleSubmit}>\n  <div className=\"form-group\">\n    <label>Tên Sản Phẩm</label>\n    <input name=\"name\" value={this.state.name} onChange={this.handleChange} type=\"text\" className=\"form-control\"/>\n  </div>\n  <div className=\"form-group\">\n    <label>Giá</label>\n    <input type=\"number\" value={this.state.price} onChange={this.handleChange} name=\"price\" className=\"form-control\"/>\n  </div>\n \n    <div className=\"form-check\">\n      <label className=\"form-check-label mr-5\"> Trạng Thái</label>\n      <input type=\"checkbox\" checked={this.state.status} value={this.state.status} onChange={this.handleChange} name=\"status\" className=\"form-check-input mr-10\"/>\n       Còn Hàng\n    </div>\n  <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n  <Link to=\"/product-list\" className=\"btn btn-danger mr-5\">\n  <i className=\"glyphicon glyphicon-arrow-left\"></i> Trở Lại\n</Link>\n  </form> \n  </div>\n\n\n );\n}\n\n}\nconst mapStatetoProps = state => {\n  return { \n      itemSelected:state.itemSelected\n  }\n  }\nconst mapDispatchToProps = (dispatch,ownProps) =>{\n  return {\n    handleSubmit: (product) => {\n      dispatch(actAddProductRequest(product))\n    },\n    onEditProduct: (id) =>{\n      dispatch(actGetProductRequest(id))\n    },\n    onUpdateProduct: (product) =>{\n      dispatch(acUpdateProductRequest(product))\n    },\n    fetchAllPropducts: ()=>{\n      dispatch(actFetchProductsRequest())\n    }\n  }\n}\n\nexport default connect(mapStatetoProps,mapDispatchToProps)(FormPage);"]},"metadata":{},"sourceType":"module"}